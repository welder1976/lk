(function($,globalOptions){var selectorRootTable='.gold-exchange table';var selectorSellInput='.input.sell-input';var selectorRevenueInput='.input.revenue-input';var selectorSubmitButton='#sellgold-submit-btn';var marketOptions=globalOptions.gold_exchange||{};var adjustRevenueInput=function($this){var $revenue=$this.closest('tr').find(selectorRevenueInput);var minRevenue=Number($this.val())*(Number(marketOptions.min_coins_per_gold)||1);var revenue=Number($revenue.val());revenue=Math.max(revenue,minRevenue);$revenue.val($this.val()>0?revenue:0);};var adjustSellInput=function($this){var userValue=Number($this.val());var valueMax=Number($this.prop('max'));var valueMin=Number(marketOptions.min_gold_volume)||0;if(0!==userValue){$this.val(value=Math.max(valueMin,Math.min(valueMax,userValue)));}};var calcTotalSell=function($root){var totalSell=0;$root.find(selectorSellInput).each(function(){totalSell+=Number($(this).val());});$root.find('.total-sell-gold span.value').text(totalSell);$(selectorSubmitButton).prop('disabled',totalSell<=0);};var calcTotalRevenue=function($root){var totalRevenue=0;$root.find(selectorRevenueInput).each(function(){if(Number($(this).parent().prev().find(selectorSellInput).val())>0){totalRevenue+=Number($(this).val());}});$root.find('.total-revenue-gold span.value').text(totalRevenue);$(selectorSubmitButton).prop('disabled',totalRevenue<=0);};var onChangeSellInput=function(){adjustSellInput($(this));adjustRevenueInput($(this));var $root=$(this).closest(selectorRootTable);calcTotalSell($root);calcTotalRevenue($root);};var onChangeRevenueInput=function(){var $root=$(this).closest(selectorRootTable);var $sellInput=$(this).closest('tr').find(selectorSellInput);adjustRevenueInput($sellInput);calcTotalRevenue($root);};$(selectorSellInput).change(onChangeSellInput);$(selectorRevenueInput).change(onChangeRevenueInput);calcTotalSell($(selectorRootTable));calcTotalRevenue($(selectorRootTable));})(jQuery,window.options);